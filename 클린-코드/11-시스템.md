# Ch.11. 시스템

> "복잡성은 죽음이다. 개발자에게서 생기를 앗아가며, 제품을 계획하고 제작하고 테스트하기 어렵게 만든다."  - 레이 오지 

# 시스템 제작과 시스템 사용을 분리하라
- 제작과 사용은 아주 다르다.
- 소프트웨어 시스템은 **준비과정과 런타임 로직을 분리**해야 한다.
- 시작 단계는 모든 애플리케이션이 풀어야 할 관심사이나 대부분은 관심사를 분리하지 않는다.
- 초기화 지연 장단점
  - 장점 : 필요할 때까지 객체 생성 X -> 불필요한 부하 X, null 포인터 반환 X 
  - 단점 : null, not null 두가지를 테스트해야 한다. (SRP 원칙 위배), 한 두번 사용은 괜찮지만 애플리케이션 곳곳에 퍼져 있으면 모듈성이 저조하고 중복이 심해진다.
- 초기화 지연 외 방식을 고려해보자.
  - **Main 분리** : 생성은 main / 사용은 애플리케이션  ==> main이나 객체가 생성되는 과정을 애플리케이션은 모름 
  - **팩토리** : 객체가 생성되는 시점을 애플리케이션이 결정 -> 인스턴스 생성 시점을 애플리케이션이 완벽하게 통제 가능 
  - **의존성 주입** : 사용과 제작을 분리하는 강력한 매커니즘 , (DI, IOT 기법 사용, SRP 보장)

# 확장
- **처음부터 올바르게 시스템을 만들 수 있다는 믿음은 미신**
- 애자일 방식(점진적 반복), TDD, 리팩터링
- 깨끗한 코드는 코드 수준에서 시스템을 조정하고 확장하기 쉽게 만듦 
- 건축과 같은 물리적 시스템과 다르게 **관심사를 적절히 분리해 관리한다면 소프트웨어 아키텍처는 점진적 발전 가능**
- 원론적으로는 모듈화되고 캡슐화된 방식으로 영속성 방식을 구상할 수 있으나 현실적으로는 온갖 객체로 흩어지게 된다. 
- EJB 아키텍처가 영속성, 보안, 트랜잭션을 처리하는 방신은 `AOP` 를 예견했다고 보인다. 
  - `AOP` 관점은 **특정 관심사를 지원하려면 시스템에서 특정 지점들이 동작하는 방식을 일관성 있게 바꿔야 한다**. 
    - 자바에서 사용하는 관점 매커니즘엔 `자바 프록시`, `순수 자바 AOP 프레임워크`, `AspectJ관점` 세가지가 있다.

## 자바 프록시
- 단순한 상황에 적합. ex) 개별 객체나 클래스에서 메서드 호출을 감싸는 경우
- JDK에서 지원되는 동적 프록시는 인터페이스만 지원하고 클래스 프록시를 사용하려면 바이트 코드 처리 라이브러리가 필요하다.
- 프록시를 사용하면 깨끗한 코드 작성이 어렵고 프록시는 시스템 단위로 **실행 지점을 명시하는 매커니즘도 제공하지 않음**


**작성중...**

## 순수 자바 AOP 프레임워크
## AspectJ 관점 
