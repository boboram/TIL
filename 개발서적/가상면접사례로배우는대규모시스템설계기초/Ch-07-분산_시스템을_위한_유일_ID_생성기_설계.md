# Ch07. 분산 시스템을 위한 유일 ID 생성기 설계


## auto_increment
- DB 서버 한대로는 분산 환경에서 감당이 안된다.

## 요구 사항 파악
- 유일 ID
- 숫자로만 구성
- 64비트 표현
- 날짜에 따른 정렬
- 초당 10,000개의 ID

## 방안 모색
- 다중 마스터 복제
  - 1씩 증가가 아닌 특정 k 만큼 증가
  - 여러 데이터 센터 적용이 힘들다.
- UUID
  - 유일성 보장은 되지만
  - 128비트 길이에 숫자로만 구성할 수 없다.
- 티켓 서버
  - 유일성 보장
  - SPOF(Single Point Of Failure) 취약
- 트위터 스노플레이크 접근법
  - 위 요구사항에 가장 적합
  - 구성 = 사인비트 + 타임스탬프 + 데이터센터ID + 서버ID + 일련 번호
  
## 추가 논의 
- 시계 동기화 : NTP 고려해보기
- 동시성이 감소되고 수명이 긴 프로젝트라면 타임스탬프 길이 늘리는 것을 고려해보기 
