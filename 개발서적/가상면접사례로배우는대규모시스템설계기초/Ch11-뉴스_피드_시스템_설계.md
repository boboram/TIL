# Ch11. 뉴스 피드 시스템 설계

## 뉴스 피드 시스템 
- 홈 페이지 중앙에 지속적으로 업데이트되는 스토리

## 문제 이해 및 설계 범위 확정 
- 모바일 앱/웹 모두 지원
- 스토리 생성 및 친구 스토리 확인 가능
- 스토리 표시 순서 : 시간 흐름 역순
- 최대 몇 명 친구 : 5,000명
- 이미지나 비디오 포함 가능

## 개략적 설계안 제시 및 동의 구하기 

- 피드 발행 : 스토리 포스팅 -> DB/캐시에 스토리 저장
- 뉴스 피드 생성

### 뉴스 피드 API
- 피드 발행 API : 새 스토리 포스팅하기 위한 API
- 피드 읽기 API : 뉴스피드 획득 API
- 피드 발행 : 사용자 -> 사용자 단말 -> 로드밸러서 -> 웹서버 -> (포스팅 저장 서비스->(포스팅캐시->포스팅DB)) | (포스팅 전송 서비스->피드 캐시) | 알림 서비스
- 뉴스 피드 생성 : 사용자 -> 사용자 단말 -> 로드밸런서 -> 웹 서버 -> 뉴스 피드 서비스 -> 뉴스 피드 캐시

## 상세 설계 
### 피드 발행 흐름 상세 설계 
- 웹 서버 : 인증, 처리율 제한, 포스팅 수 제한
- 포스팅 전송(팬아웃) 서비스 : 한 사용자가 포스팅하면 다른 친구들에게 전달하는 과정
### 피드 읽기 흐름 상세 설계 
- 사용자 단말 -> 로드밸런서 -> 웹서버(인증/처리율제한) -> 뉴스 피드 서비스(+뉴스 피드 캐시) -> 사용자 정보 캐시(+사용자 정보 DB) | 포스팅 캐시(+포스팅 DB) -> 응답(+CDN)
- 캐시 구조 : 뉴스 피드, 콘텐츠, 소셜 그래프, 행동, 횟수 
