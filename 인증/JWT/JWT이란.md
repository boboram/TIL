# JWT
- JSON Web Token
- 전자 서명 된 URL-safe의 JSON
- 전자 서명은 JSON의 변조 체크 가능
- 서버와 클라이언트 간 정보를 주고 받을 때 Http 리퀘스트 헤더에 JSON 토큰을 넣은 후 서버는 별도의 인증 과정없이 **헤더에 포함되어 있는 JWT 정보를 통해 인증**
- 이때 사용되는 JSON 데이터는 URL-safe 하도록 URL에 포함할 수 있는 문자만으로 생성
  - url safe : url에 넣을 수 있는 값들만 넣은 것 
- 값에 의한 호출이 가능한 토큰이 필요, 참조가 필요 없어 MSA 자체에서 유효한 검증 가능 -> JWT의 목적!

## 토큰 구성
> aaaaaa.bbbbbb.cccccc
- Header : 토큰 타입(JWT) + 해시 암호화 알고리즘(HMAC)으로 구성
- Payload : 전송되는 데이터, name+value 한쌍이 여러개 들어 있음 
- Signature : secret key

-> 암호화된 값임

## JWT 프로세스
- (클라이언트->서버) 사용자가 id/pw를 입력 후 로그인
- (서버) 서버는 요청 확인후 secret key 를 통해 Access token 발급
- (서버->클라이언트) 클라이언트에 JWT 전달
- (클라이언트->서버) 서비스 요청과 권한을 확인하기 위해 헤더에 JWT 전달 
- (서버) JWT 서명 체크, JWT에서 사용자 정보 확인
- (서버->클라이언트) 클라이언트 요청에 대한 응답 전달 

## 장점 
- 인증에 대한 모든 정보가 토큰에 들어있어 별도의 인증 저장소 필요 없음
- URL 파라미터와 헤더로 사용
- 트레픽 부담이 적음
- REST 서비스로 제공 가능 
- 독립적인 JWT 

## 단점
- 필드가 많아지면 토큰이 커질 수 있음
- 디비에서 사용자 정보를 수정해도 토큰에 반영 X

## 사용하는 경우
- 회원 인증 : 사용자 정보를 토큰으로 발급, 세션 필요 없고 로그인 유무 신경 X
- 정보 교류 : 서명이 돼있기 때문에 사용자 검증 가능
