# 06. 기본적인 리팩터링

## 함수 추출하기 158~168page
- 코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다. 
  - 길이를 기준으로 삼을 수 있다. 
  - 목적과 구현을 분리 : 코드를 분석하는데 오랜 시간이 걸린다면 그 부분을 함수로 추출한 뒤 '무슨 일' 에 걸맞는 이름을 짓는다. 
  - 함수를 짧게 만들면 캐싱하기가 더 쉽기 때문에 컴파일러가 최적화하는 데 유리한 경우가 많다. 
  - 짧은 함수의 이점은 해당 내부 코드가 무슨 일을 하는지 명확한 이름을 지어야만 발휘된다. 
- 절차
  - 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다('어떻게'가 아닌 '무엇을' 하는지가 드러나야 한다)
    - 명확한 이름이 떠오르지 않다면 함수로 추출하면 안된다. 
  - 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다.
    - 지역&매개 변수가 있다면 인수로 전달한다. 
    - 수정되는 지역변수가 너무 많다면? 함수 추출을 멈추고, 변수 쪼개기나 임시 변수를 질의 함수로 바꾸기와 같은 다른 리팩터링을 적용해서 변수를 사용하는 코드를 단순하게 바꿔본다. 그 후 함수 추출을 다시 시도한다.
  - 변수를 다 처리했다면 컴파일한다.
  - 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다. (추출 함수로 위임한다.)
  - 테스트한다.
  - 추출된 함수와 비슷한 코드가 있는지 확인후 바꿀지 검토한다. 

## 함수 인라인하기 169~172page
```
function getRating(driver) {
  return moreThanFiveLateDeliveries(driver) ? 2 : 1;
}

function moreThanFiveLateDeliveries(driver) {
  return driver.numberOfLateDeliveries > 5;
}
```
보다는!
```
function getRating(driver) {
  return (driver.numberOfLateDeliveries > 5) ? 2 : 1;
}
```
- 인라인 대상 : 리팩터링 과정에서 잘못 추출된 함수들, 간접 호출을 너무 과하게 쓰는 코드
- 절차
  - 다형 메서드는 인라인하면 안됨
  - 인라인할 함수를 호출하는 곳을 모두 찾기
  - 각 호출문을 함수 본문으로 교체
  - 하나씩 교체할 때마다 테스트 
  - 함수 정의(원래 함수)를 삭제 
- 상황이 복잡하다면 함수 인라인을 적용해서는 안된다. 
