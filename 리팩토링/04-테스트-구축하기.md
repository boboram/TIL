# CH 04. 테스트 구축하기
- 133 ~ 152 page

- 테스트 작성을 하면 시간은 빼앗기나 개발 효율이 높아진다.

## 자가 테스트 코드의 가치
- 코드를 수정하거나 작성하는 것보다 디버깅하는데 더 많은 시간이 소요된다. 
- 테스트가 성공했는지 확인하려면 의도한 결과와 테스트 결과가 같은지만 비교하면 된다. 
- 모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자. 
- 테스트 스위트는 강력한 버그 검출 도구로, 버그를 찾는 데 걸리는 시간을 대폭 줄여준다. 
- 테스트를 작성하기 가장 좋은 시점은 프로그래밍 시작하기 전이다. 


## 테스트
- 실패해야 할 상황에서는 반드시 실패하게 만들자. 
- 자주 테스트하라. 작성 중인 코드는 최소한 몇 분 간격으로 테스트하고, 적어도 하루에 한 번은 전체 테스트를 돌려보자. 

## 테스트 추가하기
- 테스트는 위험 요인을 중심으로 작성해야 한다! 테스트의 목적은 어디까지나 현재 혹은 향후에 발생하는 버그를 찾는 데 있다.
- 단순히 필드를 읽고 쓰기만 하는 접근자는 테스트할 필요가 없다. 
- 많은 테스트보다는 잘못될까봐 가장 걱정되는 영역을 집중적으로 테스트하여 효과를 극대화하자.
- 완벽하게 만드느라 테스트를 수행하지 못하느니, 불완전한 테스트라도 작성해 실행하는 게 낫다. 
- 테스트끼리 상호작용하게 하는 공유 픽스처를 생성하지 말자. 
```
const asia = new Province(sampleProvinceData()); 
```
보다는 
```
let asia;
beforeEach(function() {
  asia = new Province(sampleProvinceData());
});
```
가 낫다. 
- beforeEach(phpunit의 setUp과 같은 것인듯) 구문은 각 테스트 시작 전에 실행되어 asia를 초기화하기 때문에 새로운 asia 사용이 가능하다.
- 불변임이 확실한 픽스처는 공유하기도 한다. 

## 픽스처 수정하기
- given-when-then 조건-발생-결과 
- beforeEach에서 설정한 픽스처가 조건(given)
- 한 테스트당 하나의 속성을 검증하는 것이 좋다. 

## 경계 조건 검사하기 
- 문제가 생길 가능성이 있는 경계 조건을 생각해보고 그 부분을 집중적으로 테스트하자. 
  - 음수가 데이터가 들어간 경우 금액이라면 0 미만으로 떨어지진 않아야 한다. 이를 테스트코드로 작성해본다.
- 이런 오류로 인해 프로그램 내부에 잘못된 데이터가 흘러서 디버깅하기 어려운 문제가 발생한다면 어서션 추가하기를 적용해서 오류가 최대한 빨리 드러나게 하자. 어서션도 일종의 테스트로 볼 수 있으니 테스트 코드를 따로 작성할 필요는 없다.
- 어차피 모든 버그를 잡아낼 수는 없다고 생각하여 테스트를 작성하지 않는다면 대다수의 버그를 잡을 수 있는 기회를 날리는 셈이다. 




